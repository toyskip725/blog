---
title: "retrospective: 振り返り (2024年10月～12月)"
publishedAt: 2024-12-22
tags: ["振り返り", "勉強", "個人開発"]
visible: true
---

2024年10月から12月にかけて、やったことを振り返る。

## 圏論

*Category Theory* (Awodey 2010) を読み始めた。Chapter 3（Duality）の序盤あたりまで。

次の目標は、もう少し読み進めてみることと、[sumi notebooks](https://toyskip725.github.io/notebooks/) に圏論のノートを作成していくこと。


## sumiml

GitHub:　[toyskip725/sumiml: markup language](https://github.com/toyskip725/sumiml)

後述するsumi notebooksへの組み込みが終わり、ひとまず使える状態になったので作業が一段落した。
が、いくつか残件があるので `0.1.0` の正式リリースということにはしていない。例えば：

- ドキュメント整備。特に言語仕様（BNF）は初期段階で仕様を考えながら書いていたもので、その後も試行錯誤があったため、今あるものはほとんど正しくない。
- 一部のHTML生成時、イベントリスナ関数としてJavaScriptを直接埋め込んでいる。`.js`ファイルを外部から読み込む形にする方が拡張性が高く、生成物としても美しい。

次の目標は、バージョン `0.1.0` を正式にリリースすること。


## sumi notebooks

ドキュメント記載フォーマットをMDXからSumimlに移行した。併せて、MathJaxのレンダリング方式をクライアントレンダリングに変更した。

この変更の背景について。これまで数式表示は、MDXファイルにTeX記法で書き、`remark-math` `rehype-mathjax` プラグインでビルド時にレンダリングするという手法を取っていた。
この方法の明確な利点は、Webページ表示時にMathJaxを動かす必要がないので、数式表示にタイムラグが出ないことである。

一方で、ノートを作っている中で、いくつか問題もあることに気づいた。

- `rehype-mathjax` 経由でMathJaxを呼び出すということは、MathJaxの設定を（ソースコードに直接手を入れない限り）調整できないということでもある。
これは、一般的な数式を書く分には（例えばKaTeXと同等の表現力で足りる場合など）そこまで大きな問題ではない。また、`bussproofs` のように、結果として問題ないこともある。しかし、直接MathJaxを使えば様々な拡張機能がそれほど苦労せずに使えるはずのところ、大幅な制約を受け入れざるを得ないというのは将来的には不安がある。
- 実際、XyJaxを組み込む方法は、少し調べた範囲ではわからなかった。
- MDXファイルでTeX記法を書くと、なんらかの条件でパースエラーが発生する。明確には原因調査していないが、エラーメッセージを見る限りは `acorn` のエラーのようである。エラーが発生していても `remark-math` を有効にしている限りはHTMLに変換できるので、実害はないとしてしばらく放置していたのだが、`remark-math` を無効にすると、このエラーが原因でHTMLへの変換に失敗することに気づいた。つまり、MDXファイルで書く限り、数式表示は `remark-math` と `rehype-xxx` の仕組みに依存しなければならない。

この移行により、MathJaxを直接呼び出すようになったので、特に可換図式をノート内に直接書けるようになった（正確に言えば、今までも `amscd` 拡張で書くことはできたのだが、大幅に表現力が向上する）。その他の些細な点としては、数式を右クリックするとMathJaxのメニューが表示されるようになった。TeX Commandsを見たりコピーしたりできるのは便利かもしれない。

一方、Webページ表示時に数式レンダリングの分のラグがわずかに発生するようになったのと、ノート作成中のリロード時、ビルド時にやたら時間がかかるようになった。
後者はsumimlの実装に問題がある可能性が高いので、優先度を見て調査、改善を進めていく予定。


次の目標は、各ページへのリンクをネットワークグラフ状に表示する機能を追加すること。これは [sigma.js](https://www.sigmajs.org/) というライブラリを使って実装しようと思っている。


##  blog v2

ブログ記事:　[project: blog v2 | sumi blog](https://toyskip725.github.io/blog/post/2024-12-01/)

ブログを作り直した。


## その他

- **ラムダ計算・型理論**：圏論の勉強を優先しているので止まっているが、圏論が一段落したら再開する予定。
- **論理学**：いずれカリー＝ハワード対応について書くつもりなので、ノートの構想やモチベーション自体はある。が、こちらもリソースが足りないため、着手はしばらく先になる予定。
- **関数型言語**：興味が出てきたので、いくつかWSL2(Ubuntu)上で環境構築を進めている。個人開発で使えるレベルになるように勉強したい。